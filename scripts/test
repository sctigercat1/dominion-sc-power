#!/usr/bin/env bash
# Test script for Home Assistant Unraid Integration
# Runs pytest with coverage

set -e

cd "$(dirname "$0")/.."

# Activate virtual environment if it exists
if [ -f .venv/bin/activate ]; then
    source .venv/bin/activate
fi

echo "ðŸ§ª Running tests with coverage..."
pytest \
    --cov=dominionsc \
    --cov-report=term-missing \
    --cov-report=html \
    -v \
    "$@"

echo ""
echo "âœ… Tests complete!"
echo "ðŸ“Š Coverage report: htmlcov/index.html"
